"0","library(viridis)"
"0","energy_mix <- function(country) {"
"0","  "
"0","  energy |> "
"0","    select(1:2, 6:14) |> # we will now have 11 columns"
"0","    pivot_longer(cols = 3:11,"
"0","                 names_to = ""source"","
"0","                 values_to = ""value"") |> "
"0","    "
"0","    filter(country == {{country}}, "
"0","           year >= 2000,"
"0","           value > 0 ) |> "
"0","    "
"0","    mutate(source = fct_reorder(source, value, max)) |> "
"0","    drop_na(value) |> "
"0","    "
"0","    "
"0","    ggplot()+"
"0","    aes(x=year, y = value, fill=source )+"
"0","    geom_area(color=""grey90"", "
"0","              alpha = 0.5,"
"0","              position = ""fill"")+ # so you get to 100%"
"0","    theme_bw()+"
"0","    scale_fill_viridis(discrete = T,"
"0","                       option = ""H"") +"
"0","    scale_y_continuous(labels = scales::percent)+"
"0","    labs(title = glue::glue(""Electricity Production Mix for "", {{country}}),"
"0","         x=NULL,"
"0","         y=NULL,"
"0","         fill= ""Source"")"
"0","}"
"0",""
"0","energy_mix(""Germany"")"
