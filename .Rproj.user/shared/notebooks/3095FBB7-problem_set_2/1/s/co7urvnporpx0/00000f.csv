"0","energyFuelData = join2 %>%"
"0","                 filter(continent != ""Other"") %>%  # Filter out ""Other"" continents"
"0","                 select(continent, "
"0","                        year,"
"0","                        biofuel, "
"0","                        coal, "
"0","                        gas, "
"0","                        hydro, "
"0","                        nuclear, "
"0","                        oil, "
"0","                        solar, "
"0","                        wind) %>%"
"0","                group_by(continent, year) %>%"
"0","                summarise(across(biofuel:wind, "
"0","                                 sum, "
"0","                                 na.rm = TRUE), "
"0","                          .groups = ""drop"")  # Sum energy usage by year and continent + remove all ""na"" values. Lastly ungroup the data."
"0",""
"0","# Pivot the data to long format"
"0","energyFuelData <- energyFuelData %>%"
"0","                  pivot_longer(cols = biofuel:wind,"
"0","                               names_to = ""energy_source"", "
"0","                               values_to = ""usage"") %>%"
"0","                  mutate(usage_log = log(usage + 1 )) "
"0","                  # usage_relative = usage / population"
"0","# Apply log transformation to energy usage (log(usage + 1) to avoid log(0))"
"0","# I had to add usage+1 because log(0) is 1, leading to a heatmap with some blank values "
"0","                      "
"0",""
"0","# plotting the graph"
"0","heatMap<- ggplot(energyFuelData, "
"0","                 aes(x = year, "
"0","                     y = energy_source, "
"0","                     fill = usage_log)) +"
"0","                 geom_tile() +"
"0","                 scale_fill_viridis_c(option = ""inferno"", # Fill with a continuous color scale"
"0","                                      name = ""Log Relative Energy Use"", "
"0","                                      direction = -1,) + # darker colours -> higher energy usage "
"0","                 labs( title = ""Energy Sources Used by Continents Over Time"","
"0","                       x = ""Year"","
"0","                       y = ""Energy Source"", "
"0","                       ) +"
"0","                 theme_minimal() +"
"0","                 facet_wrap(~ continent) # Creating a heatmap for each continent"
"0",""
"0","# Convert ggplot to interactive plotly plot"
"0","interactiveHeatmap <- ggplotly(heatMap)"
"0",""
"0","# Display the interactive heatmap"
"0","interactiveHeatmap"
